<idea-plugin>
    <id>php.codeGolf.training</id>
    <name>PhpStorm Code Golf Crash Course</name>
    <vendor url="http://www.jetbrains.com">JetBrains</vendor>

    <description><![CDATA[
        <p>Get prepared for Code Golf! Learn the basic required shortcuts and essential features interactively,
        right inside the IDE. No need for manuals or screencasts: install the plugin, switch to the Learn tool window,
        and start training.</p>
    ]]></description>
    <application-components>
        <component>
            <implementation-class>php.codeGolf.training.learn.TrainingProjectLifecycleListener</implementation-class>
        </component>
    </application-components>

    <depends>com.intellij.modules.platform</depends>
    <depends>com.jetbrains.php</depends>
    <depends optional="true">com.intellij.testGuiFramework</depends>

    <extensionPoints>
        <extensionPoint name="TrainingLangExtension"
                        beanClass="com.intellij.lang.LanguageExtensionPoint">
            <with attribute="implementationClass" implements="php.codeGolf.training.lang.LangSupport"/>
        </extensionPoint>
    </extensionPoints>


    <!-- please see http://confluence.jetbrains.com/display/IDEADEV/Build+Number+Ranges for description -->
    <idea-version since-build="193.4778" until-build="193.*"/>

    <extensions defaultExtensionNs="com.intellij">

        <actionPromoter implementation="php.codeGolf.training.editor.actions.LearnActionPromoter"/>
        <!-- groupId should be same to StatisticBase.GROUP_ID and version to StatisticBase.VERSION -->
        <statistics.counterUsagesCollector groupId="php.codeGolf.ideFeaturesTrainer" version="1"/>
        <statistics.validation.customWhiteListRule
                implementation="php.codeGolf.training.statistic.IdeFeaturesTrainerRuleValidator"/>

        <applicationService
                serviceImplementation="php.codeGolf.training.learn.CourseManager"/>
        <applicationService
                serviceImplementation="php.codeGolf.training.statistic.ActivityManager"/>
        <applicationService
                serviceImplementation="php.codeGolf.training.learn.lesson.LessonManager"/>
        <applicationService
                serviceImplementation="php.codeGolf.training.lang.LangManager"/>
        <applicationService
                serviceImplementation="php.codeGolf.training.ui.UISettings"/>
        <applicationService
                serviceImplementation="php.codeGolf.training.learn.lesson.LessonStateBase"/>
        <applicationService
                serviceImplementation="php.codeGolf.training.statistic.StatisticBase"/>
        <toolWindow id="Learn" anchor="left" factoryClass="php.codeGolf.training.ui.LearnToolWindowFactory"
                    conditionClass="php.codeGolf.training.ui.LearnCondition"/>

    </extensions>

    <application-components>
    </application-components>

    <project-components>
        <component>
            <implementation-class>php.codeGolf.training.components.LearnProjectComponent</implementation-class>
        </component>
    </project-components>

    <actions>
        <action id="Learn.WelcomeScreen.StartLearn" class="php.codeGolf.training.actions.StartLearnAction"
                icon="/img/chevron.png">
            <add-to-group group-id="WelcomeScreen.QuickStart" anchor="last"/>
        </action>

        <action id="learn.next.lesson" class="php.codeGolf.training.actions.NextLessonAction" text="Next Lesson">
            <keyboard-shortcut first-keystroke="alt shift RIGHT" keymap="$default"/>
            <keyboard-shortcut first-keystroke="control shift RIGHT" keymap="Mac OS X 10.5+"/>
            <keyboard-shortcut first-keystroke="control shift RIGHT" keymap="Mac OS X"/>
        </action>
        <action id="learn.open.lesson" text="Open Lesson" class="php.codeGolf.training.actions.OpenLessonAction"/>
        <!--TODO: REMOVE THIS ACTION BEFORE RELEASE-->
        <action id="learn.open.chooseLang" text="Choose Lang"
                class="php.codeGolf.training.actions.ShowChooseLangPanelAction"/>
    </actions>

    <extensions defaultExtensionNs="com.intellij">
        <registryKey key="ide.features.trainer.mode"
                     description="This is internal option to use different development modes"
                     defaultValue="normal"
                     restartRequired="false"/>
    </extensions>

    <extensions defaultExtensionNs="php.codeGolf.training">
        <TrainingLangExtension language="PHP" implementationClass="php.codeGolf.training.lang.PhpStormSupport"/>
    </extensions>
</idea-plugin>